<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>oauth2-client.ring documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Oauth2-client 0.1.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>oauth2-client</span></div></div></li><li class="depth-2 branch"><a href="oauth2-client.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="oauth2-client.examples-utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>examples-utils</span></div></a></li><li class="depth-2 branch"><a href="oauth2-client.github.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>github</span></div></a></li><li class="depth-2 branch"><a href="oauth2-client.google.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>google</span></div></a></li><li class="depth-2 branch"><a href="oauth2-client.intralinks.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>intralinks</span></div></a></li><li class="depth-2 current"><a href="oauth2-client.ring.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ring</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="oauth2-client.ring.html#var-default-state-mismatch-response"><div class="inner"><span>default-state-mismatch-response</span></div></a></li><li class="depth-1"><a href="oauth2-client.ring.html#var-do-authorized"><div class="inner"><span>do-authorized</span></div></a></li><li class="depth-1"><a href="oauth2-client.ring.html#var-oauth2-callback-handler"><div class="inner"><span>oauth2-callback-handler</span></div></a></li><li class="depth-1"><a href="oauth2-client.ring.html#var-oauth2-redirect-response"><div class="inner"><span>oauth2-redirect-response</span></div></a></li><li class="depth-1"><a href="oauth2-client.ring.html#var-store-access-token"><div class="inner"><span>store-access-token</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">oauth2-client.ring</h2><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-default-state-mismatch-response"><h3>default-state-mismatch-response</h3><div class="usage"><code>(default-state-mismatch-response)</code></div><div class="doc"><pre class="plaintext">Returns 500 error response for state (for CSRF protection) mismatch.
</pre></div></div><div class="public anchor" id="var-do-authorized"><h3>do-authorized</h3><div class="usage"><code>(do-authorized {:keys [provider authorization-uri], :as oauth2-config} request authorized-fn)</code></div><div class="doc"><pre class="plaintext">Makes an authorized request via authorized-fn, passing in the
access_token stored in the session at the path [:oauth2 &lt;provider&gt;
:access_token], or alternatively, if no access_token exists, it will
initiate the process of requesting an authorization grant per

(&lt;provider&gt; will either be the value explicitly set at the :provider
key in the oauth2-config map, or the authorization-uri will be used
as a placeholder for this.)

RFC6749 section 4.1
(<a href="https://tools.ietf.org/html/rfc6749#section-4.1)">https://tools.ietf.org/html/rfc6749#section-4.1)</a>.

TODO: Handle refresh tokens (<a href="https://tools.ietf.org/html/rfc6749#section-1.5)">https://tools.ietf.org/html/rfc6749#section-1.5)</a></pre></div></div><div class="public anchor" id="var-oauth2-callback-handler"><h3>oauth2-callback-handler</h3><div class="usage"><code>(oauth2-callback-handler oauth2-config request)</code><code>(oauth2-callback-handler {:keys [provider authorization-uri], :as oauth2-config} {:keys [session params], :as request} state-mismatch-response)</code></div><div class="doc"><pre class="plaintext">Takes an oauth2-config and the resource owner&apos;s redirect Ring
request back to the client after the user has authenticated.

The state value returned by the resource owner is compared to the
state value set and stored in the session at the path [:oauth
:state]. If there is a mismatch, the state-mismatch-response is
returned. Otherwise, the access token is requested from the resource
owner, and the user is redirected to the route originally requested,
stored in the session at the path [:oauth &lt;provider&gt; :redirect-on-auth].

(&lt;provider&gt; will either be the value explicitly set at the :provider
key in the oauth2-config map, or the authorization-uri will be used
as a placeholder for this.)

By default the function default-state-mismatch-response is used
to generate the state-mismatch response, but an alternative response
can optionally be passed in as the third argument.

This function implements functionality corresponding to sections
4.1.2 through 4.1.4 of RFC6749.

<a href="https://tools.ietf.org/html/rfc6749#section-4.1.2">https://tools.ietf.org/html/rfc6749#section-4.1.2</a>

TODO: implement error handling (per section 4.1.2.1)</pre></div></div><div class="public anchor" id="var-oauth2-redirect-response"><h3>oauth2-redirect-response</h3><div class="usage"><code>(oauth2-redirect-response {:keys [provider authorization-uri], :as oauth2-config} session)</code></div><div class="doc"><pre class="plaintext">Accepts a session map and returns a redirect response for the path
at the session key-path [:oauth2 :redirect-on-auth], with the
session added back into the response.</pre></div></div><div class="public anchor" id="var-store-access-token"><h3>store-access-token</h3><div class="usage"><code>(store-access-token access-token-response response {:keys [provider authorization-uri], :as oauth2-config})</code></div><div class="doc"><pre class="plaintext">Extracts the values returned in the access token response and
returns the Ring response passed in with these values stored in
the session.</pre></div></div></div></body></html>