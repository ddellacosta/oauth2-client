<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>oauth2-client.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Oauth2-client 0.1.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>oauth2-client</span></div></div></li><li class="depth-2 branch current"><a href="oauth2-client.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="oauth2-client.ring.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ring</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="oauth2-client.core.html#var-access-token-post-request"><div class="inner"><span>access-token-post-request</span></div></a></li><li class="depth-1"><a href="oauth2-client.core.html#var-add-params-to-url"><div class="inner"><span>add-params-to-url</span></div></a></li><li class="depth-1"><a href="oauth2-client.core.html#var-auth-headers"><div class="inner"><span>auth-headers</span></div></a></li><li class="depth-1"><a href="oauth2-client.core.html#var-authorization-query-args"><div class="inner"><span>authorization-query-args</span></div></a></li><li class="depth-1"><a href="oauth2-client.core.html#var-authorization-redirect"><div class="inner"><span>authorization-redirect</span></div></a></li><li class="depth-1"><a href="oauth2-client.core.html#var-authorized-request"><div class="inner"><span>authorized-request</span></div></a></li><li class="depth-1"><a href="oauth2-client.core.html#var-generate-anti-forgery-token"><div class="inner"><span>generate-anti-forgery-token</span></div></a></li><li class="depth-1"><a href="oauth2-client.core.html#var-parse-form-access-token-response"><div class="inner"><span>parse-form-access-token-response</span></div></a></li><li class="depth-1"><a href="oauth2-client.core.html#var-parse-json-access-token-response"><div class="inner"><span>parse-json-access-token-response</span></div></a></li><li class="depth-1"><a href="oauth2-client.core.html#var-token-request-query-args"><div class="inner"><span>token-request-query-args</span></div></a></li><li class="depth-1"><a href="oauth2-client.core.html#var-validate-oauth2-config"><div class="inner"><span>validate-oauth2-config</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">oauth2-client.core</h2><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-access-token-post-request"><h3>access-token-post-request</h3><div class="usage"><code>(access-token-post-request oauth2-config)</code><code>(access-token-post-request {:keys [debug-http-client? token-request-query-args-fn], :or {token-request-query-args-fn token-request-query-args}, :as oauth2-config} accept-type)</code></div><div class="doc"><pre class="plaintext">Helper to POST an OAuth2 access token request using the
 configuration in the oauth2-config hash-map.

By default, the token-request-query-args function is used to format
the arguments for posting to the token request url, but can be
overridden by providing a :token-request-query-args-fn member in the
oauth2-config map.

You can also toggle debugging of the clj-http.client/post call by
passing in :debug-http-client? true in the oauth2-config map.</pre></div></div><div class="public anchor" id="var-add-params-to-url"><h3>add-params-to-url</h3><div class="usage"><code>(add-params-to-url url query-params)</code></div><div class="doc"><pre class="plaintext">Generates an url with a query string from a url string
and hash-map for the query parameters.</pre></div></div><div class="public anchor" id="var-auth-headers"><h3>auth-headers</h3><div class="usage"><code>(auth-headers method access_token)</code></div><div class="doc"><pre class="plaintext">Returns a hash-map with Authorization request headers per section 7
of RFC6749 (<a href="https://tools.ietf.org/html/rfc6749#section-7)">https://tools.ietf.org/html/rfc6749#section-7)</a>.</pre></div></div><div class="public anchor" id="var-authorization-query-args"><h3>authorization-query-args</h3><div class="usage"><code>(authorization-query-args {:keys [client-id redirect-uri scope state], :as config})</code></div><div class="doc"><pre class="plaintext">Generates a hash-map representation of the default arguments
for a authorization query as specified in section 4.1.1 in RFC 6749.</pre></div></div><div class="public anchor" id="var-authorization-redirect"><h3>authorization-redirect</h3><div class="usage"><code>(authorization-redirect {:keys [authorization-query-args-fn], :or {authorization-query-args-fn authorization-query-args}, :as oauth2-config})</code></div><div class="doc"><pre class="plaintext">Helper to generate a response url for an OAuth2 authorization
request from an oauth2-config hash-map.</pre></div></div><div class="public anchor" id="var-authorized-request"><h3>authorized-request</h3><div class="usage"><code>(authorized-request method access_token url)</code><code>(authorized-request method access_token url clj-http-config)</code></div><div class="doc"><pre class="plaintext">Makes a GET request to url using the access_token stored in the
request headers at the &apos;Authorization&apos; key, as suggested by RFC6749
in section 7 (<a href="https://tools.ietf.org/html/rfc6749#section-7)">https://tools.ietf.org/html/rfc6749#section-7)</a>.

The third, optional argument is the configuration for the get/post
functions provided by clj-http.client.  By default only the
Authorization header is set with the authorization method of
&apos;Bearer,&apos; using the provided auth-headers function.

To override this or any other get/post configuration parameters
simply pass in a map formatted per clj-http&apos;s conventions
(<a href="https://github.com/dakrone/clj-http)">https://github.com/dakrone/clj-http)</a>. For example, to add debugging
to an authorized GET request using a Github access_token:

(let [clj-http-config (-&gt; (auth-headers &quot;token&quot; access_token)
                          (assoc :debug true :debug-body true))]
  (authorized-request :get &quot;<a href="https://api.github.com/users&quot">https://api.github.com/users&quot</a>; clj-http-config))

The authorization headers will override the default, and any other
arguments will get added to the clj-http get or post function&apos;s
final second argument.
</pre></div></div><div class="public anchor" id="var-generate-anti-forgery-token"><h3>generate-anti-forgery-token</h3><div class="usage"><code>(generate-anti-forgery-token)</code></div><div class="doc"><pre class="plaintext">Generates random string for anti-forgery-token.
</pre></div></div><div class="public anchor" id="var-parse-form-access-token-response"><h3>parse-form-access-token-response</h3><div class="usage"><code>(parse-form-access-token-response {body :body})</code></div><div class="doc"><pre class="plaintext">Alternate function to allow retrieve
access_token when passed in form-encoded.</pre></div></div><div class="public anchor" id="var-parse-json-access-token-response"><h3>parse-json-access-token-response</h3><div class="usage"><code>(parse-json-access-token-response {body :body})</code></div><div class="doc"><pre class="plaintext">Returns the access token from a JSON response body per RFC6749
(<a href="https://tools.ietf.org/html/rfc6749#section-5.1)">https://tools.ietf.org/html/rfc6749#section-5.1)</a>.</pre></div></div><div class="public anchor" id="var-token-request-query-args"><h3>token-request-query-args</h3><div class="usage"><code>(token-request-query-args {:keys [client-id client-secret redirect-uri state code], :as config})</code></div><div class="doc"><pre class="plaintext">Extracts default arguments from the oauth2-config hash-map
according to the OAuth2 RFC6749.  Expects the following keys:
:code :client_id :redirect-uri :state
:redirect-uri is optional depending on whether or not it was passed
initially during the authorization step.
:state is optional and not described in the RFC for the token
request step, but used by some providers (i.e. Github).
(see <a href="https://tools.ietf.org/html/rfc6749#section-4.1.3)">https://tools.ietf.org/html/rfc6749#section-4.1.3)</a></pre></div></div><div class="public anchor" id="var-validate-oauth2-config"><h3>validate-oauth2-config</h3><div class="usage"><code>(validate-oauth2-config oauth2-config)</code></div><div class="doc"><pre class="plaintext">Basic validation function for oauth2-config, simply confirms that
all the required keys have non-blank (per clojure.string/blank?)
values. These include :authorization-uri, :access-token-uri,
:client-id and :client-secret. Returns boolean value.</pre></div></div></div></body></html>